<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Sample 16</title>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
        window.addEventListener ('load', init);

        function init () {
            // ステージを作成
            const stage = new createjs.Stage ('myCanvas');

            // 船を作成
            const ship = new createjs.Shape ();
            ship.graphics.beginFill ('DarkRed')
                .moveTo (-10, +5)
                .lineTo (-10, -5)
                .lineTo (5, 0);
            stage.addChild (ship);

            // 画面の中央に配置
            ship.x = stage.canvas.width / 2;
            ship.y = stage.canvas.height / 2;

            // キーボードが押されているかの判定を行う
            let isPressLeft = false;
            let isPressRight = false;
            let isPressUp = false;
            let isPressDown = false;

            // キーボードを押したタイミングを検知
            window.addEventListener ('keydown', handleKeyDown);
            window.addEventListener ('keyup', handleKeyUp);

            function handleKeyDown (event) {
                // キーコード（どのキーが押されたか）を取得する
                const keyCode = event.keyCode;
                if (keyCode === 39) { // →
                    isPressRight = true;
                } else if (keyCode === 37) { // ←
                    isPressLeft = true;
                } else if (keyCode === 40) { // ↓
                    isPressDown = true;
                } else if (keyCode === 38) { // ↑
                    isPressUp = true;
                }
            }

            function handleKeyUp (event) {
                // キーコード（どのキーが押されたか）を取得する
                const keyCode = event.keyCode;
                if (keyCode === 39) { // →
                    isPressRight = false;
                } else if (keyCode === 37) { // ←
                    isPressLeft = false;
                } else if (keyCode === 40) { // ↓
                    isPressDown = false;
                } else if (keyCode === 38) { // ↑
                    isPressUp = false;
                }
            }

            // 時間経過
            createjs.Ticker.addEventListener ('tick', handleTick);

            function handleTick () {
                // 条件分で船の位置を変更する
                if (isPressRight === true) {
                    ship.x += 1;
                } else if (isPressLeft === true) {
                    ship.x -= 1;
                } else if (isPressDown === true) {
                    ship.y += 1;
                } else if (isPressUp === true) {
                    ship.y -= 1;
                }

                stage.update ();
            }
        }
    </script>
</head>
<body>
<canvas id="myCanvas" width="960" height="540"></canvas>
</body>
</html>