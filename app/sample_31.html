<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Sample 31</title>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
        // 読み込みが終わってから初期化
        window.addEventListener ('load', init);

        function init () {
            // 初期化
            const stage = new createjs.Stage ('myCanvas');

            const circles = [];
            for (let i = 0; i < 5; i++) {
                circles.push (createBubble (250 + i * 80));
            }

            for (let i = 0; i < 5; i++) {
                const circle = circles[i];

                stage.addChild (circle);
                stage.update ();
            }



            createjs.Ticker.setFPS (60);
            createjs.Ticker.addEventListener ('tick', function (event) {
                for (let i = 0; i < 5; i++) {
                    const circle = circles[i];
                    circle.updateCache ();
                }

                stage.update (event);
            });
        }

        function createBubble (x) {
            const circle = new createjs.Shape ();
            circle.graphics.beginFill ('green').drawCircle (0, 0, 100);

            circle.x = x;
            circle.y = 150;

            const filter = new createjs.ColorFilter (1, 1, 1, 1);
            circle.filters = [filter];
            circle.cache (-100, -100, 100 * 2, 100 * 2);

            createjs.Tween.get (filter, {loop: true})
                .to ({greenMultiplier: 1.5}, 1000)
                .to ({greenMultiplier: 0.7}, 1000);

            createjs.Tween.get (circle, {loop: true})
                .to ({y: 500}, 3000)
                .to ({y: 150}, 3000);

            return circle;
        }
    </script>
</head>
<body>
<main>
    <canvas id="myCanvas" width="980" height="400"></canvas>
</main>
</body>
</html>