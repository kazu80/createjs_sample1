<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Sample 32 - Ripple</title>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
        // 読み込みが終わってから初期化
        window.addEventListener ('load', init);

        function init () {
            // 初期化
            const stage = new createjs.Stage ('myCanvas');



            // circle.setTransform(circle.x, circle.y, 0.01, 0.01);

            //stage.addChild (circle);
            //stage.update ();

            let radius = 1;
            let alpha = 1;
            let count = 0;
            let tick_count = 0;
            let speed = 2;

            const above = 20;
            const alpha_default = 0.008;

            const circleArray = [];

            function tick (event) {
                tick_count += 1;

                if (tick_count % speed === 1) {
                    return;
                }

                count += 1;
                radius += 1;
                alpha -= alpha_default;

                if (count % above === 1) {
                    // Create Circle
                    const circle = new createjs.Shape ();

                    circle.x = stage.canvas.width / 2;
                    circle.y = stage.canvas.height / 2;

                    //
                    circleArray.push (circle);
                    stage.addChild (circle);
                }

                for (let i = 0; i < circleArray.length; i++) {
                    const circle = circleArray[i];

                    let size = radius - (above * i);
                    let al = alpha + (alpha_default * above) * i;

                    circle.graphics.clear ()
                        .beginStroke ('rgba(25,25,25,' + al + ')')
                        .setStrokeStyle (1)
                        .drawCircle (0, 0, size);

                    if (al < 0) {

                    }
                }


                stage.update (event);
            }

            createjs.Ticker.setFPS (60);
            createjs.Ticker.addEventListener ('tick', tick);

        }
    </script>
</head>
<body>
<canvas id="myCanvas" width="980" height="400"></canvas>
</body>
</html>